function dataFunc(){data={labels:["<20","20-50","50-150","150-300",">300"],datasets:[{fillColor:"rgba(220,220,220,0.5)",strokeColor:"rgba(220,220,220,1)",pointColor:"rgba(220,220,220,1)",pointStrokeColor:"#fff",data:[2,56,8,5,80]}]};var a=etsyItems.filter(function(a){return a.get("price")<20}),b=etsyItems.filter(function(a){return a.get("price")>20&&a.get("price")<50}),c=etsyItems.filter(function(a){return a.get("price")>50&&a.get("price")<150}),d=etsyItems.filter(function(a){return a.get("price")>150&&a.get("price")<300}),e=etsyItems.filter(function(a){return a.get("price")>300});return console.log(data.datasets[0].data[0]=a.length),console.log(data.datasets[0].data[1]=b.length),console.log(data.datasets[0].data[2]=c.length),console.log(data.datasets[0].data[3]=d.length),console.log(data.datasets[0].data[4]=e.length),data}function erasedb(){$.get("http://tiny-pizza-server.herokuapp.com/collections/EtsyItemCollection",function(a){for(i=0;i<a.length;i+=1){console.log("http://tiny-pizza-server.herokuapp.com/collections/EtsyItemCollection/"+a[i]._id);var b="http://tiny-pizza-server.herokuapp.com/collections/EtsyItemCollection/"+a[i]._id;$.ajax({url:b,type:"delete"})}})}window.Chart=function(a){function b(a,b,c){var d=b.steps*b.stepValue,e=a-b.graphMin,f=j(e/d,1,0);return c*b.steps*f}function c(a,b,c,d){function e(){var e=a.animation?j(h(i),null,0):1;r(d),a.scaleOverlay?(c(e),b()):(b(),c(e))}function f(){i+=g,e(),1>=i?y(f):"function"==typeof a.onAnimationComplete&&a.onAnimationComplete()}var g=a.animation?1/j(a.animationSteps,Number.MAX_VALUE,1):1,h=o[a.animationEasing],i=a.animation?0:1;"function"!=typeof b&&(b=function(){}),y(f)}function d(a,b,c,d,f,g){function h(a){return Math.floor(Math.log(a)/Math.LN10)}var i,j,k,l,m,n,o;for(n=d-f,o=h(n),i=Math.floor(f/(1*Math.pow(10,o)))*Math.pow(10,o),j=Math.ceil(d/(1*Math.pow(10,o)))*Math.pow(10,o),k=j-i,l=Math.pow(10,o),m=Math.round(k/l);c>m||m>b;)c>m?(l/=2,m=Math.round(k/l)):(l*=2,m=Math.round(k/l));var p=[];return e(g,p,m,i,l),{steps:m,stepValue:l,graphMin:i,labels:p}}function e(a,b,c,d,e){if(a)for(var f=1;c+1>f;f++)b.push(m(a,{value:(d+e*f).toFixed(k(e))}))}function f(a){return Math.max.apply(Math,a)}function g(a){return Math.min.apply(Math,a)}function h(a,b){return a?a:b}function i(a){return!isNaN(parseFloat(a))&&isFinite(a)}function j(a,b,c){return i(b)&&a>b?b:i(c)&&c>a?c:a}function k(a){return a%1!=0?a.toString().split(".")[1].length:0}function l(a,b){var c={};for(var d in a)c[d]=a[d];for(var d in b)c[d]=b[d];return c}function m(a,b){var c=/\W/.test(a)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):z[a]=z[a]||m(document.getElementById(a).innerHTML);return b?c(b):c}var n=this,o={linear:function(a){return a},easeInQuad:function(a){return a*a},easeOutQuad:function(a){return-1*a*(a-2)},easeInOutQuad:function(a){return(a/=.5)<1?.5*a*a:-0.5*(--a*(a-2)-1)},easeInCubic:function(a){return a*a*a},easeOutCubic:function(a){return 1*((a=a/1-1)*a*a+1)},easeInOutCubic:function(a){return(a/=.5)<1?.5*a*a*a:.5*((a-=2)*a*a+2)},easeInQuart:function(a){return a*a*a*a},easeOutQuart:function(a){return-1*((a=a/1-1)*a*a*a-1)},easeInOutQuart:function(a){return(a/=.5)<1?.5*a*a*a*a:-0.5*((a-=2)*a*a*a-2)},easeInQuint:function(a){return 1*(a/=1)*a*a*a*a},easeOutQuint:function(a){return 1*((a=a/1-1)*a*a*a*a+1)},easeInOutQuint:function(a){return(a/=.5)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)},easeInSine:function(a){return-1*Math.cos(a/1*(Math.PI/2))+1},easeOutSine:function(a){return 1*Math.sin(a/1*(Math.PI/2))},easeInOutSine:function(a){return-0.5*(Math.cos(Math.PI*a/1)-1)},easeInExpo:function(a){return 0==a?1:1*Math.pow(2,10*(a/1-1))},easeOutExpo:function(a){return 1==a?1:1*(-Math.pow(2,-10*a/1)+1)},easeInOutExpo:function(a){return 0==a?0:1==a?1:(a/=.5)<1?.5*Math.pow(2,10*(a-1)):.5*(-Math.pow(2,-10*--a)+2)},easeInCirc:function(a){return a>=1?a:-1*(Math.sqrt(1-(a/=1)*a)-1)},easeOutCirc:function(a){return 1*Math.sqrt(1-(a=a/1-1)*a)},easeInOutCirc:function(a){return(a/=.5)<1?-0.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},easeInElastic:function(a){var b=1.70158,c=0,d=1;if(0==a)return 0;if(1==(a/=1))return 1;if(c||(c=.3),d<Math.abs(1)){d=1;var b=c/4}else var b=c/(2*Math.PI)*Math.asin(1/d);return-(d*Math.pow(2,10*(a-=1))*Math.sin(2*(1*a-b)*Math.PI/c))},easeOutElastic:function(a){var b=1.70158,c=0,d=1;if(0==a)return 0;if(1==(a/=1))return 1;if(c||(c=.3),d<Math.abs(1)){d=1;var b=c/4}else var b=c/(2*Math.PI)*Math.asin(1/d);return d*Math.pow(2,-10*a)*Math.sin(2*(1*a-b)*Math.PI/c)+1},easeInOutElastic:function(a){var b=1.70158,c=0,d=1;if(0==a)return 0;if(2==(a/=.5))return 1;if(c||(c=.3*1.5),d<Math.abs(1)){d=1;var b=c/4}else var b=c/(2*Math.PI)*Math.asin(1/d);return 1>a?-.5*d*Math.pow(2,10*(a-=1))*Math.sin(2*(1*a-b)*Math.PI/c):d*Math.pow(2,-10*(a-=1))*Math.sin(2*(1*a-b)*Math.PI/c)*.5+1},easeInBack:function(a){var b=1.70158;return 1*(a/=1)*a*((b+1)*a-b)},easeOutBack:function(a){var b=1.70158;return 1*((a=a/1-1)*a*((b+1)*a+b)+1)},easeInOutBack:function(a){var b=1.70158;return(a/=.5)<1?.5*a*a*(((b*=1.525)+1)*a-b):.5*((a-=2)*a*(((b*=1.525)+1)*a+b)+2)},easeInBounce:function(a){return 1-o.easeOutBounce(1-a)},easeOutBounce:function(a){return(a/=1)<1/2.75?7.5625*a*a:2/2.75>a?1*(7.5625*(a-=1.5/2.75)*a+.75):2.5/2.75>a?1*(7.5625*(a-=2.25/2.75)*a+.9375):1*(7.5625*(a-=2.625/2.75)*a+.984375)},easeInOutBounce:function(a){return.5>a?.5*o.easeInBounce(2*a):.5*o.easeOutBounce(2*a-1)+.5}},p=a.canvas.width,q=a.canvas.height;window.devicePixelRatio&&(a.canvas.style.width=p+"px",a.canvas.style.height=q+"px",a.canvas.height=q*window.devicePixelRatio,a.canvas.width=p*window.devicePixelRatio,a.scale(window.devicePixelRatio,window.devicePixelRatio)),this.PolarArea=function(b,c){n.PolarArea.defaults={scaleOverlay:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleShowLine:!0,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animation:!0,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,onAnimationComplete:null};var d=c?l(n.PolarArea.defaults,c):n.PolarArea.defaults;return new s(b,d,a)},this.Radar=function(b,c){n.Radar.defaults={scaleOverlay:!1,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleShowLine:!0,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!1,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,angleShowLineOut:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:12,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null};var d=c?l(n.Radar.defaults,c):n.Radar.defaults;return new t(b,d,a)},this.Pie=function(b,c){n.Pie.defaults={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animation:!0,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,onAnimationComplete:null};var d=c?l(n.Pie.defaults,c):n.Pie.defaults;return new u(b,d,a)},this.Doughnut=function(b,c){n.Doughnut.defaults={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animation:!0,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,onAnimationComplete:null};var d=c?l(n.Doughnut.defaults,c):n.Doughnut.defaults;return new v(b,d,a)},this.Line=function(b,c){n.Line.defaults={scaleOverlay:!1,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,bezierCurve:!0,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:2,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null};var d=c?l(n.Line.defaults,c):n.Line.defaults;return new w(b,d,a)},this.Bar=function(b,c){n.Bar.defaults={scaleOverlay:!1,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null};var d=c?l(n.Bar.defaults,c):n.Bar.defaults;return new x(b,d,a)};var r=function(a){a.clearRect(0,0,p,q)},s=function(a,i,j){function k(){o=g([p,q])/2,o-=f([.5*i.scaleFontSize,.5*i.scaleLineWidth]),t=2*i.scaleFontSize,i.scaleShowLabelBackdrop&&(t+=2*i.scaleBackdropPaddingY,o-=1.5*i.scaleBackdropPaddingY),u=o,t=h(t,5)}function l(){for(var a=0;a<s.steps;a++)if(i.scaleShowLine&&(j.beginPath(),j.arc(p/2,q/2,r*(a+1),0,2*Math.PI,!0),j.strokeStyle=i.scaleLineColor,j.lineWidth=i.scaleLineWidth,j.stroke()),i.scaleShowLabels){j.textAlign="center",j.font=i.scaleFontStyle+" "+i.scaleFontSize+"px "+i.scaleFontFamily;var b=s.labels[a];if(i.scaleShowLabelBackdrop){var c=j.measureText(b).width;j.fillStyle=i.scaleBackdropColor,j.beginPath(),j.rect(Math.round(p/2-c/2-i.scaleBackdropPaddingX),Math.round(q/2-r*(a+1)-.5*i.scaleFontSize-i.scaleBackdropPaddingY),Math.round(c+2*i.scaleBackdropPaddingX),Math.round(i.scaleFontSize+2*i.scaleBackdropPaddingY)),j.fill()}j.textBaseline="middle",j.fillStyle=i.scaleFontColor,j.fillText(b,p/2,q/2-r*(a+1))}}function m(c){var d=-Math.PI/2,e=2*Math.PI/a.length,f=1,g=1;i.animation&&(i.animateScale&&(f=c),i.animateRotate&&(g=c));for(var h=0;h<a.length;h++)j.beginPath(),j.arc(p/2,q/2,f*b(a[h].value,s,r),d,d+g*e,!1),j.lineTo(p/2,q/2),j.closePath(),j.fillStyle=a[h].color,j.fill(),i.segmentShowStroke&&(j.strokeStyle=i.segmentStrokeColor,j.lineWidth=i.segmentStrokeWidth,j.stroke()),d+=g*e}function n(){for(var b=Number.MIN_VALUE,c=Number.MAX_VALUE,d=0;d<a.length;d++)a[d].value>b&&(b=a[d].value),a[d].value<c&&(c=a[d].value);var e=Math.floor(u/(.66*t)),f=Math.floor(u/t*.5);return{maxValue:b,minValue:c,maxSteps:e,minSteps:f}}var o,r,s,t,u,v,w;k(),v=n(),w=i.scaleShowLabels?i.scaleLabel:null,i.scaleOverride?(s={steps:i.scaleSteps,stepValue:i.scaleStepWidth,graphMin:i.scaleStartValue,labels:[]},e(w,s.labels,s.steps,i.scaleStartValue,i.scaleStepWidth)):s=d(u,v.maxSteps,v.minSteps,v.maxValue,v.minValue,w),r=o/s.steps,c(i,l,m,j)},t=function(a,i,k){function l(c){var d=2*Math.PI/a.datasets[0].data.length;k.save(),k.translate(p/2,q/2);for(var e=0;e<a.datasets.length;e++){k.beginPath(),k.moveTo(0,-1*c*b(a.datasets[e].data[0],t,s));for(var f=1;f<a.datasets[e].data.length;f++)k.rotate(d),k.lineTo(0,-1*c*b(a.datasets[e].data[f],t,s));if(k.closePath(),k.fillStyle=a.datasets[e].fillColor,k.strokeStyle=a.datasets[e].strokeColor,k.lineWidth=i.datasetStrokeWidth,k.fill(),k.stroke(),i.pointDot){k.fillStyle=a.datasets[e].pointColor,k.strokeStyle=a.datasets[e].pointStrokeColor,k.lineWidth=i.pointDotStrokeWidth;for(var g=0;g<a.datasets[e].data.length;g++)k.rotate(d),k.beginPath(),k.arc(0,-1*c*b(a.datasets[e].data[g],t,s),i.pointDotRadius,2*Math.PI,!1),k.fill(),k.stroke()}k.rotate(d)}k.restore()}function m(){var b=2*Math.PI/a.datasets[0].data.length;if(k.save(),k.translate(p/2,q/2),i.angleShowLineOut){k.strokeStyle=i.angleLineColor,k.lineWidth=i.angleLineWidth;for(var c=0;c<a.datasets[0].data.length;c++)k.rotate(b),k.beginPath(),k.moveTo(0,0),k.lineTo(0,-r),k.stroke()}for(var d=0;d<t.steps;d++){if(k.beginPath(),i.scaleShowLine){k.strokeStyle=i.scaleLineColor,k.lineWidth=i.scaleLineWidth,k.moveTo(0,-s*(d+1));for(var e=0;e<a.datasets[0].data.length;e++)k.rotate(b),k.lineTo(0,-s*(d+1));k.closePath(),k.stroke()}if(i.scaleShowLabels){if(k.textAlign="center",k.font=i.scaleFontStyle+" "+i.scaleFontSize+"px "+i.scaleFontFamily,k.textBaseline="middle",i.scaleShowLabelBackdrop){var f=k.measureText(t.labels[d]).width;k.fillStyle=i.scaleBackdropColor,k.beginPath(),k.rect(Math.round(-f/2-i.scaleBackdropPaddingX),Math.round(-s*(d+1)-.5*i.scaleFontSize-i.scaleBackdropPaddingY),Math.round(f+2*i.scaleBackdropPaddingX),Math.round(i.scaleFontSize+2*i.scaleBackdropPaddingY)),k.fill()}k.fillStyle=i.scaleFontColor,k.fillText(t.labels[d],0,-s*(d+1))}}for(var g=0;g<a.labels.length;g++){k.font=i.pointLabelFontStyle+" "+i.pointLabelFontSize+"px "+i.pointLabelFontFamily,k.fillStyle=i.pointLabelFontColor;var h=Math.sin(b*g)*(r+i.pointLabelFontSize),j=Math.cos(b*g)*(r+i.pointLabelFontSize);k.textAlign=b*g==Math.PI||b*g==0?"center":b*g>Math.PI?"right":"left",k.textBaseline="middle",k.fillText(a.labels[g],h,-j)}k.restore()}function n(){r=g([p,q])/2,u=2*i.scaleFontSize;for(var b=0,c=0;c<a.labels.length;c++){k.font=i.pointLabelFontStyle+" "+i.pointLabelFontSize+"px "+i.pointLabelFontFamily;var d=k.measureText(a.labels[c]).width;d>b&&(b=d)}r-=f([b,i.pointLabelFontSize/2*1.5]),r-=i.pointLabelFontSize,r=j(r,null,0),v=r,u=h(u,5)}function o(){for(var b=Number.MIN_VALUE,c=Number.MAX_VALUE,d=0;d<a.datasets.length;d++)for(var e=0;e<a.datasets[d].data.length;e++)a.datasets[d].data[e]>b&&(b=a.datasets[d].data[e]),a.datasets[d].data[e]<c&&(c=a.datasets[d].data[e]);var f=Math.floor(v/(.66*u)),g=Math.floor(v/u*.5);return{maxValue:b,minValue:c,maxSteps:f,minSteps:g}}var r,s,t,u,v,w,x;a.labels||(a.labels=[]),n();var w=o();x=i.scaleShowLabels?i.scaleLabel:null,i.scaleOverride?(t={steps:i.scaleSteps,stepValue:i.scaleStepWidth,graphMin:i.scaleStartValue,labels:[]},e(x,t.labels,t.steps,i.scaleStartValue,i.scaleStepWidth)):t=d(v,w.maxSteps,w.minSteps,w.maxValue,w.minValue,x),s=r/t.steps,c(i,m,l,k)},u=function(a,b,d){function e(c){var e=-Math.PI/2,g=1,i=1;b.animation&&(b.animateScale&&(g=c),b.animateRotate&&(i=c));for(var j=0;j<a.length;j++){var k=i*(a[j].value/f)*2*Math.PI;d.beginPath(),d.arc(p/2,q/2,g*h,e,e+k),d.lineTo(p/2,q/2),d.closePath(),d.fillStyle=a[j].color,d.fill(),b.segmentShowStroke&&(d.lineWidth=b.segmentStrokeWidth,d.strokeStyle=b.segmentStrokeColor,d.stroke()),e+=k}}for(var f=0,h=g([q/2,p/2])-5,i=0;i<a.length;i++)f+=a[i].value;c(b,null,e,d)},v=function(a,b,d){function e(c){var e=-Math.PI/2,g=1,j=1;b.animation&&(b.animateScale&&(g=c),b.animateRotate&&(j=c));for(var k=0;k<a.length;k++){var l=j*(a[k].value/f)*2*Math.PI;d.beginPath(),d.arc(p/2,q/2,g*h,e,e+l,!1),d.arc(p/2,q/2,g*i,e+l,e,!0),d.closePath(),d.fillStyle=a[k].color,d.fill(),b.segmentShowStroke&&(d.lineWidth=b.segmentStrokeWidth,d.strokeStyle=b.segmentStrokeColor,d.stroke()),e+=l}}for(var f=0,h=g([q/2,p/2])-5,i=h*(b.percentageInnerCutout/100),j=0;j<a.length;j++)f+=a[j].value;c(b,null,e,d)},w=function(a,f,g){function h(c){function d(d,e){return z-c*b(a.datasets[d].data[e],o,n)}function e(a){return y+v*a}for(var h=0;h<a.datasets.length;h++){g.strokeStyle=a.datasets[h].strokeColor,g.lineWidth=f.datasetStrokeWidth,g.beginPath(),g.moveTo(y,z-c*b(a.datasets[h].data[0],o,n));for(var i=1;i<a.datasets[h].data.length;i++)f.bezierCurve?g.bezierCurveTo(e(i-.5),d(h,i-1),e(i-.5),d(h,i),e(i),d(h,i)):g.lineTo(e(i),d(h,i));if(g.stroke(),f.datasetFill?(g.lineTo(y+v*(a.datasets[h].data.length-1),z),g.lineTo(y,z),g.closePath(),g.fillStyle=a.datasets[h].fillColor,g.fill()):g.closePath(),f.pointDot){g.fillStyle=a.datasets[h].pointColor,g.strokeStyle=a.datasets[h].pointStrokeColor,g.lineWidth=f.pointDotStrokeWidth;for(var j=0;j<a.datasets[h].data.length;j++)g.beginPath(),g.arc(y+v*j,z-c*b(a.datasets[h].data[j],o,n),f.pointDotRadius,0,2*Math.PI,!0),g.fill(),g.stroke()}}}function i(){g.lineWidth=f.scaleLineWidth,g.strokeStyle=f.scaleLineColor,g.beginPath(),g.moveTo(p-w/2+5,z),g.lineTo(p-w/2-x-5,z),g.stroke(),A>0?(g.save(),g.textAlign="right"):g.textAlign="center",g.fillStyle=f.scaleFontColor;for(var b=0;b<a.labels.length;b++)g.save(),A>0?(g.translate(y+b*v,z+f.scaleFontSize),g.rotate(-(A*(Math.PI/180))),g.fillText(a.labels[b],0,0),g.restore()):g.fillText(a.labels[b],y+b*v,z+f.scaleFontSize+3),g.beginPath(),g.moveTo(y+b*v,z+3),f.scaleShowGridLines&&b>0?(g.lineWidth=f.scaleGridLineWidth,g.strokeStyle=f.scaleGridLineColor,g.lineTo(y+b*v,5)):g.lineTo(y+b*v,z+3),g.stroke();g.lineWidth=f.scaleLineWidth,g.strokeStyle=f.scaleLineColor,g.beginPath(),g.moveTo(y,z+5),g.lineTo(y,5),g.stroke(),g.textAlign="right",g.textBaseline="middle";for(var c=0;c<o.steps;c++)g.beginPath(),g.moveTo(y-3,z-(c+1)*n),f.scaleShowGridLines?(g.lineWidth=f.scaleGridLineWidth,g.strokeStyle=f.scaleGridLineColor,g.lineTo(y+x+5,z-(c+1)*n)):g.lineTo(y-.5,z-(c+1)*n),g.stroke(),f.scaleShowLabels&&g.fillText(o.labels[c],y-8,z-(c+1)*n)}function j(){var b=1;if(f.scaleShowLabels){g.font=f.scaleFontStyle+" "+f.scaleFontSize+"px "+f.scaleFontFamily;for(var c=0;c<o.labels.length;c++){var d=g.measureText(o.labels[c]).width;b=d>b?d:b}b+=10}x=p-b-w,v=Math.floor(x/(a.labels.length-1)),y=p-w/2-x,z=s+f.scaleFontSize/2}function k(){m=q,g.font=f.scaleFontStyle+" "+f.scaleFontSize+"px "+f.scaleFontFamily,w=1;for(var b=0;b<a.labels.length;b++){var c=g.measureText(a.labels[b]).width;w=c>w?c:w}p/a.labels.length<w?(A=45,p/a.labels.length<Math.cos(A)*w?(A=90,m-=w):m-=Math.sin(A)*w):m-=f.scaleFontSize,m-=5,r=f.scaleFontSize,m-=r,s=m}function l(){for(var b=Number.MIN_VALUE,c=Number.MAX_VALUE,d=0;d<a.datasets.length;d++)for(var e=0;e<a.datasets[d].data.length;e++)a.datasets[d].data[e]>b&&(b=a.datasets[d].data[e]),a.datasets[d].data[e]<c&&(c=a.datasets[d].data[e]);var f=Math.floor(s/(.66*r)),g=Math.floor(s/r*.5);return{maxValue:b,minValue:c,maxSteps:f,minSteps:g}}var m,n,o,r,s,t,u,v,w,x,y,z,A=0;k(),t=l(),u=f.scaleShowLabels?f.scaleLabel:"",f.scaleOverride?(o={steps:f.scaleSteps,stepValue:f.scaleStepWidth,graphMin:f.scaleStartValue,labels:[]},e(u,o.labels,o.steps,f.scaleStartValue,f.scaleStepWidth)):o=d(s,t.maxSteps,t.minSteps,t.maxValue,t.minValue,u),n=Math.floor(s/o.steps),j(),c(f,i,h,g)},x=function(a,f,g){function h(c){g.lineWidth=f.barStrokeWidth;for(var d=0;d<a.datasets.length;d++){g.fillStyle=a.datasets[d].fillColor,g.strokeStyle=a.datasets[d].strokeColor;for(var e=0;e<a.datasets[d].data.length;e++){var h=y+f.barValueSpacing+v*e+A*d+f.barDatasetSpacing*d+f.barStrokeWidth*d;g.beginPath(),g.moveTo(h,z),g.lineTo(h,z-c*b(a.datasets[d].data[e],o,n)+f.barStrokeWidth/2),g.lineTo(h+A,z-c*b(a.datasets[d].data[e],o,n)+f.barStrokeWidth/2),g.lineTo(h+A,z),f.barShowStroke&&g.stroke(),g.closePath(),g.fill()}}}function i(){g.lineWidth=f.scaleLineWidth,g.strokeStyle=f.scaleLineColor,g.beginPath(),g.moveTo(p-w/2+5,z),g.lineTo(p-w/2-x-5,z),g.stroke(),B>0?(g.save(),g.textAlign="right"):g.textAlign="center",g.fillStyle=f.scaleFontColor;for(var b=0;b<a.labels.length;b++)g.save(),B>0?(g.translate(y+b*v,z+f.scaleFontSize),g.rotate(-(B*(Math.PI/180))),g.fillText(a.labels[b],0,0),g.restore()):g.fillText(a.labels[b],y+b*v+v/2,z+f.scaleFontSize+3),g.beginPath(),g.moveTo(y+(b+1)*v,z+3),g.lineWidth=f.scaleGridLineWidth,g.strokeStyle=f.scaleGridLineColor,g.lineTo(y+(b+1)*v,5),g.stroke();g.lineWidth=f.scaleLineWidth,g.strokeStyle=f.scaleLineColor,g.beginPath(),g.moveTo(y,z+5),g.lineTo(y,5),g.stroke(),g.textAlign="right",g.textBaseline="middle";for(var c=0;c<o.steps;c++)g.beginPath(),g.moveTo(y-3,z-(c+1)*n),f.scaleShowGridLines?(g.lineWidth=f.scaleGridLineWidth,g.strokeStyle=f.scaleGridLineColor,g.lineTo(y+x+5,z-(c+1)*n)):g.lineTo(y-.5,z-(c+1)*n),g.stroke(),f.scaleShowLabels&&g.fillText(o.labels[c],y-8,z-(c+1)*n)}function j(){var b=1;if(f.scaleShowLabels){g.font=f.scaleFontStyle+" "+f.scaleFontSize+"px "+f.scaleFontFamily;for(var c=0;c<o.labels.length;c++){var d=g.measureText(o.labels[c]).width;b=d>b?d:b}b+=10}x=p-b-w,v=Math.floor(x/a.labels.length),A=(v-2*f.scaleGridLineWidth-2*f.barValueSpacing-(f.barDatasetSpacing*a.datasets.length-1)-(f.barStrokeWidth/2*a.datasets.length-1))/a.datasets.length,y=p-w/2-x,z=s+f.scaleFontSize/2}function k(){m=q,g.font=f.scaleFontStyle+" "+f.scaleFontSize+"px "+f.scaleFontFamily,w=1;for(var b=0;b<a.labels.length;b++){var c=g.measureText(a.labels[b]).width;w=c>w?c:w}p/a.labels.length<w?(B=45,p/a.labels.length<Math.cos(B)*w?(B=90,m-=w):m-=Math.sin(B)*w):m-=f.scaleFontSize,m-=5,r=f.scaleFontSize,m-=r,s=m}function l(){for(var b=Number.MIN_VALUE,c=Number.MAX_VALUE,d=0;d<a.datasets.length;d++)for(var e=0;e<a.datasets[d].data.length;e++)a.datasets[d].data[e]>b&&(b=a.datasets[d].data[e]),a.datasets[d].data[e]<c&&(c=a.datasets[d].data[e]);var f=Math.floor(s/(.66*r)),g=Math.floor(s/r*.5);return{maxValue:b,minValue:c,maxSteps:f,minSteps:g}}var m,n,o,r,s,t,u,v,w,x,y,z,A,B=0;k(),t=l(),u=f.scaleShowLabels?f.scaleLabel:"",f.scaleOverride?(o={steps:f.scaleSteps,stepValue:f.scaleStepWidth,graphMin:f.scaleStartValue,labels:[]},e(u,o.labels,o.steps,f.scaleStartValue,f.scaleStepWidth)):o=d(s,t.maxSteps,t.minSteps,t.maxValue,t.minValue,u),n=Math.floor(s/o.steps),j(),c(f,i,h,g)},y=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),z={}};var MainRouter=Backbone.Router.extend({routes:{"":"listView","items/:id":"itemView"},initialize:function(){},listView:function(){etsyItems.fillItemList()},itemView:function(a){var b=etsyItems.findWhere({listing_id:Number(a)});b?new ItemView({model:b}):location.hash=""}}),EtsyItem=Backbone.Model.extend({idAttribute:"listing_id",initialize:function(){}}),EtsyItemsCollection=Backbone.Collection.extend({model:EtsyItem,initialize:function(){this.endpoint="https://openapi.etsy.com/v2/listings/active.js?callback=randomFunction",this.limit=20,this.sort_by="price",this.sort_order="down",this.keywords="bowtie,mens",this.fields="title,price,description,listing_id,url",this.includes="Images",this.api_key="kr9rjq7dc9c24jv6fccq2hus",this.on("add",function(a){new ListView({model:a})}),this.fillItemList=function(){$(".list-viewer").empty(),this.each(function(a){new ListView({model:a})}),etsyItems.first()&&($(".list-viewer").removeClass("hide"),new ItemView({model:etsyItems.first()}))},this.hipstermaticFetch=function(a){var b=hipsterWords.gimmeTwo();etsyItems.keywords=b.join("+"),console.log("keywords   ",etsyItems.keywords),$(".page-title").html('Hipstermatic Etsy Browser<br>Searching for <span class="keywords">'+b.join(" and ")+"</span>. . .  "),$(".page-title").append('<p class="small search-again cleared-out">too many people know about this already?     <button type="button" class="btn btn-default btn-lg hipstermatic-search-btn"> Be Unique-er, search again</button></p>'),console.log("url   ",etsyItems.url()),etsyItems.fetch(a)}},parse:function(a){return a.results},comparator:function(a){return-a.get("price")},url:function(){var a=this.endpoint;return this.limit&&(a+="&limit="+this.limit),this.sort_by&&(a+="&sorty_by="+this.sorty_by),this.sort_order&&(a+="&sort_order="+this.sort_order),this.keywords&&(a+="&keywords="+this.keywords),this.fields&&(a+="&fields="+this.fields),this.includes&&(a+="&includes="+this.includes),a+"&api_key="+this.api_key}}),ItemView=Backbone.View.extend({className:"item-view panel panel-default",initialize:function(){this.render(),$(".item-viewer").html(this.el)},renderTemplate:_.template($("#item-view-template").text()),render:function(){this.$el.html(this.renderTemplate(this.model))}}),ListView=Backbone.View.extend({tagName:"a",className:"list-view list-group-item clearfix",initialize:function(){this.setHref(),this.render(),$(".list-viewer").append(this.el)},renderTemplate:_.template($("#list-view-template").text()),render:function(){this.$el.html(this.renderTemplate(this.model))},setHref:function(){var a=this.model.get("listing_id"),b="#/items/"+a;this.$el.attr({href:b})}}),hipsterWords={paragraph:"",gimmeTwo:function(){return paragraphArray=this.paragraph.split(" ").slice(1,-1),paragraphArray=_.reject(paragraphArray,function(a){return""==a}),_.sample(paragraphArray,2)}};Parse.initialize("gCR9KS7rXD7MlaTjdrGcf9DdDcoDZG5lqIZiVoPe","4XKF3hLDAceJzKDSAne42qDm2AJTKgNGXxnH9Nlg");var TestObject=Parse.Object.extend("TestObject"),testObject=new TestObject;testObject.save({foo:"bar"}).then(function(){console.log("yay! Parse worked")}),etsyItems=new EtsyItemsCollection,router=new MainRouter,Backbone.history.start(),$(".page-title").on("click",".hipstermatic-search-btn",function(){etsyItems.hipstermaticFetch(fetchObject)}),fetchObject={success:function(){if(etsyItems.isEmpty())console.log("no results... let us try something else..."),$(".search-again").addClass("cleared-out"),etsyItems.hipstermaticFetch(fetchObject);else{etsyItems.fillItemList(),console.log("fetch is complete. etsyItems contains: ",etsyItems);{new Chart(ctx).Line(dataFunc())}$(".search-again").removeClass("cleared-out")}},error:function(){console.log("there was a problem with fetch")},dataType:"jsonp"},$.ajax({dataType:"jsonp",url:"http://jsonp.jit.su/?callback=?&url=http://hipsterjesus.com/api/?paras=1&type=hipster-centric&html=false",success:function(a){hipsterWords.paragraph=a.text,etsyItems.hipstermaticFetch(fetchObject)},error:function(){console.log("error")}});var ctx=$("#myChart").get(0).getContext("2d");